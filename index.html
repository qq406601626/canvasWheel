<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <style>

  body {
    margin: 0;
    padding: 0;
    background: #999999;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
  }



  </style>
  <!--  <script src="js/velocity.min.js"></script>-->
  <!--  <script src="js/velocity.ui.min.js"></script>-->
</head>
<body>
<canvas id="canvas" width="600" height="600"></canvas>
</body>
<script>
const cvs = document.getElementById('canvas')


class Pie {
  constructor(ctx, x, y, r, startAngle, angle) {
    this.ctx = ctx
    this.x = x
    this.y = y
    this.r = r
    this.startAngle = startAngle
    this.angle = angle
    this.endAngle = this.startAngle + this.angle
    // this.textCenterX = 0.5 * this.r
    // this.textCenterY = Math.tan(0.5 * this.angle) * this.textCenterX
  }


  drawPrize(prize) {
    // this.ctx.save()
    // this.ctx.translate(this.x, this.y)
    // this.ctx.rotate(this.startAngle)
    // this.ctx.translate(this.textCenterX, this.textCenterY)
    // this.ctx.rotate(0.5 * Math.PI + 0.5 * this.angle)
    // this.ctx.font = '40px 宋体'
    // this.ctx.fillStyle = '#ffffff'
    // this.ctx.textAlign = 'center'
    // this.ctx.fillText('张三', 0, 0)
    // this.ctx.restore()
  }

  drawBg(color) {
    this.ctx.beginPath()
    this.ctx.save()
    this.ctx.translate(this.x, this.y)
    this.ctx.rotate(this.startAngle)
    this.ctx.arc(0, 0, this.r, 0, this.angle)
    this.ctx.lineTo(0, 0)
    this.ctx.closePath()
    this.ctx.fillStyle = color
    this.ctx.fill()
    this.ctx.restore()
  }
}

class Wheel {
  constructor(cvs) {
    this.ctx = cvs.getContext('2d')
    this.width = cvs.width
    this.height = cvs.height
    this.centerX = this.width / 2
    this.centerY = this.height / 2
    this.r = this.width / 2
    this.pies = []
  }

  deg2rad(deg) {
    return (deg / 180) * Math.PI
  }

  // 绘制背景
  drawBg(color) {
    this.ctx.fillStyle = color
    this.ctx.arc(this.centerX, this.centerY, this.r, 0, this.deg2rad(360))
    this.ctx.fill()
  }

  // 绘制扇形
  drawSector(count, colorArray) {
    const pieAngle = this.deg2rad(360 / count)
    for (let i = 0; i < count; i++) {
      const color = colorArray[i % colorArray.length]
      const pie = new Pie(this.ctx, this.centerX, this.centerY, this.r, i * pieAngle, pieAngle)
      pie.drawBg(color)
      // pie.drawPrize()
      this.pies.push(pie)
    }
  }
}

const wheel = new Wheel(cvs)
wheel.drawBg('#ffffff')
wheel.drawSector(2, ['red', 'green'])
</script>
</html>